<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <title>Kalkulator BMI</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #FFF7F3;
      font-family: Calibri, sans-serif;
    }
    h1 {
      font-family: 'Ink Free', cursive;
      font-size: 30px;
      font-weight: bold;
    }
    .symbol {
      font-size: 30px;
      font-weight: bold;
      color: brown;
    }
    .result {
      font-size: 25px;
      color: purple;
      margin-top: 10px;
      font-weight: bold;
      transition: all 0.3s ease-in-out;
    }
    #height, #weight {
      font-size: 20px;
    }
    

  </style>
</head>
<body>
  <div class="container mt-5 text-center">
    <h1><img src="tim.gif" alt="tick" style="vertical-align: middle;"/>Kalkulator BMI</h1>
    
    <section class="result-section">
      <div class="result-content">
        <span class="result" id="result">...</span>
      </div>
      <h2 class="result-title" style="font-size: 25px; color: purple;">Keputusan:</h2>
      <span class="symbol" id="symbol">...</span>
    </section>

    <hr>
    <div class="mb-3">
      <h5><label for="height">Tinggi (cm):</label></h5>
      <input type="number" id="height" class="form-control w-25 mx-auto">
    </div>
    <div class="mb-3">
      <h5><label for="weight">Berat (kg):</label></h5>
      <input type="number" id="weight" class="form-control w-25 mx-auto">
    </div>
    <button class="btn btn-danger" style="font-size: 20px;" onclick="kiraBMI()">Kira</button>

    <hr>
    <h4>Apa Itu BMI (Indeks Jisim Badan)?</h4>
    <h5>Ia ialah ukuran untuk menilai sama ada seseorang mempunyai <br>berat badan yang sihat berdasarkan ketinggiannya.</h5>

    <h4 class="mt-4">Kategori:</h4>
    <h5><ul class="list-unstyled">
      <li style="color:blue;">✘ Kurang Berat: BMI di bawah 18.5</li>
      <li style="color:green;">✔ Berat Normal: BMI antara 18.5 hingga 24.9</li>
      <li style="color:#FEBA17;">✘ Lebih Berat: BMI antara 25 hingga 29.9</li>
      <li style="color:#E52020;">✘ Obes: BMI 30 ke atas</li>
    </ul></h5>

    <div style="height:20px;"></div>
    <footer class="mt-2" style="color:gray; font-style:italic; font-size:14px;">
      @Koleksi77
    </footer>
    <div style="height:20px;"></div>
  </div>

 <script>
  function kiraBMI() {
    const height = parseFloat(document.getElementById("height").value);
    const weight = parseFloat(document.getElementById("weight").value);
    const result = document.getElementById("result");
    const symbol = document.getElementById("symbol");

    if (isNaN(height) || isNaN(weight)) {
      alert("Sila masukkan nombor yang sah.");
      return;
    }

    const heightM = height / 100;
    const bmi = weight / (heightM ** 2);
    const bmiRounded = bmi.toFixed(2);

    let kategori, ikon;
    if (bmi < 18.5) {
      kategori = "Kurang berat";
      ikon = "✘";
    } else if (bmi < 24.9) {
      kategori = "Berat normal";
      ikon = "✔";
    } else if (bmi < 29.9) {
      kategori = "Lebih berat";
      ikon = "✘";
    } else {
      kategori = "Obes";
      ikon = "✘";
    }

    const narasi = `Indeks jisim badan anda ialah ${bmiRounded}, dan ia tergolong dalam kategori ${kategori}`;
    result.textContent = `Nilai BMI anda: ${bmiRounded} · Kategori: ${kategori}.`;
    symbol.textContent = ikon;

    const utterance = new SpeechSynthesisUtterance(narasi);
    utterance.lang = "ms-MY";
    utterance.rate = 1.05;
    utterance.pitch = 0.9;

    // Tetapkan suara lelaki Melayu jika ada
    const voices = speechSynthesis.getVoices();
    const maleMalayVoice = voices.find(v =>
      v.lang === 'ms-MY' && (
        v.name.toLowerCase().includes("male") ||
        v.name.toLowerCase().includes("lelaki") ||
        v.name.toLowerCase().includes("man") ||
        v.name.toLowerCase().includes("adam")
      )
    );

    if (maleMalayVoice) {
      utterance.voice = maleMalayVoice;
    }

    // Semak jika sudah bercakap, hentikan dahulu supaya tak ulang
    if (speechSynthesis.speaking) {
      speechSynthesis.cancel();
    }

    speechSynthesis.speak(utterance);
  }
</script>
</body>
</html>
